import{y as P,n as U,m as A,G as B,g as O,U as N,l as w,W as V,a as u,$ as x,C as X,a0 as Y,h,a1 as j}from"./index.06d11def.js";import{n as H,o as D,c as Q,f as G}from"./QBtn.6ba9f19b.js";import{Q as R}from"./QResizeObserver.21f4ea9f.js";const I=[null,document,document.body,document.scrollingElement,document.documentElement];function K(e,r){let o=D(r);if(o===void 0){if(e==null)return window;o=e.closest(".scroll,.scroll-y,.overflow-auto")}return I.includes(o)?window:o}function k(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function J(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}let T;function L(){if(T!==void 0)return T;const e=document.createElement("p"),r=document.createElement("div");H(e,{width:"100%",height:"200px"}),H(r,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),r.appendChild(e),document.body.appendChild(r);const o=e.offsetWidth;r.style.overflow="scroll";let n=e.offsetWidth;return o===n&&(n=r.clientWidth),r.remove(),T=o-n,T}const{passive:W}=N,Z=["both","horizontal","vertical"];var _=Q({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Z.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:r}){const o={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,a,d;P(()=>e.scrollTarget,()=>{f(),p()});function s(){n!==null&&n();const m=Math.max(0,k(a)),g=J(a),c={top:m-o.position.top,left:g-o.position.left};if(e.axis==="vertical"&&c.top===0||e.axis==="horizontal"&&c.left===0)return;const S=Math.abs(c.top)>=Math.abs(c.left)?c.top<0?"up":"down":c.left<0?"left":"right";o.position={top:m,left:g},o.directionChanged=o.direction!==S,o.delta=c,o.directionChanged===!0&&(o.direction=S,o.inflectionPoint=o.position),r("scroll",{...o})}function p(){a=K(d,e.scrollTarget),a.addEventListener("scroll",i,W),i(!0)}function f(){a!==void 0&&(a.removeEventListener("scroll",i,W),a=void 0)}function i(m){if(m===!0||e.debounce===0||e.debounce==="0")s();else if(n===null){const[g,c]=e.debounce?[setTimeout(s,e.debounce),clearTimeout]:[requestAnimationFrame(s),cancelAnimationFrame];n=()=>{c(g),n=null}}}const{proxy:y}=O();return P(()=>y.$q.lang.rtl,s),U(()=>{d=y.$el.parentNode,p()}),A(()=>{n!==null&&n(),f()}),Object.assign(y,{trigger:i,getPosition:()=>o}),B}}),ne=Q({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:r,emit:o}){const{proxy:{$q:n}}=O(),a=w(null),d=w(n.screen.height),s=w(e.container===!0?0:n.screen.width),p=w({position:0,direction:"down",inflectionPoint:0}),f=w(0),i=w(V.value===!0?0:L()),y=u(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),m=u(()=>e.container===!1?{minHeight:n.screen.height+"px"}:null),g=u(()=>i.value!==0?{[n.lang.rtl===!0?"left":"right"]:`${i.value}px`}:null),c=u(()=>i.value!==0?{[n.lang.rtl===!0?"right":"left"]:0,[n.lang.rtl===!0?"left":"right"]:`-${i.value}px`,width:`calc(100% + ${i.value}px)`}:null);function S(t){if(e.container===!0||document.qScrollPrevented!==!0){const l={position:t.position.top,direction:t.direction,directionChanged:t.directionChanged,inflectionPoint:t.inflectionPoint.top,delta:t.delta.top};p.value=l,e.onScroll!==void 0&&o("scroll",l)}}function F(t){const{height:l,width:v}=t;let b=!1;d.value!==l&&(b=!0,d.value=l,e.onScrollHeight!==void 0&&o("scrollHeight",l),E()),s.value!==v&&(b=!0,s.value=v),b===!0&&e.onResize!==void 0&&o("resize",t)}function M({height:t}){f.value!==t&&(f.value=t,E())}function E(){if(e.container===!0){const t=d.value>f.value?L():0;i.value!==t&&(i.value=t)}}let z=null;const $={instances:{},view:u(()=>e.view),isContainer:u(()=>e.container),rootRef:a,height:d,containerHeight:f,scrollbarWidth:i,totalWidth:u(()=>s.value+i.value),rows:u(()=>{const t=e.view.toLowerCase().split(" ");return{top:t[0].split(""),middle:t[1].split(""),bottom:t[2].split("")}}),header:x({size:0,offset:0,space:!1}),right:x({size:300,offset:0,space:!1}),footer:x({size:0,offset:0,space:!1}),left:x({size:300,offset:0,space:!1}),scroll:p,animate(){z!==null?clearTimeout(z):document.body.classList.add("q-body--layout-animate"),z=setTimeout(()=>{z=null,document.body.classList.remove("q-body--layout-animate")},155)},update(t,l,v){$[t][l]=v}};if(X(j,$),L()>0){let v=function(){t=null,l.classList.remove("hide-scrollbar")},b=function(){if(t===null){if(l.scrollHeight>n.screen.height)return;l.classList.add("hide-scrollbar")}else clearTimeout(t);t=setTimeout(v,300)},C=function(q){t!==null&&q==="remove"&&(clearTimeout(t),v()),window[`${q}EventListener`]("resize",b)},t=null;const l=document.body;P(()=>e.container!==!0?"add":"remove",C),e.container!==!0&&C("add"),Y(()=>{C("remove")})}return()=>{const t=G(r.default,[h(_,{onScroll:S}),h(R,{onResize:F})]),l=h("div",{class:y.value,style:m.value,ref:e.container===!0?void 0:a,tabindex:-1},t);return e.container===!0?h("div",{class:"q-layout-container overflow-hidden",ref:a},[h(R,{onResize:M}),h("div",{class:"absolute-full",style:g.value},[h("div",{class:"scroll",style:c.value},[l])])]):l}}});export{ne as Q};
